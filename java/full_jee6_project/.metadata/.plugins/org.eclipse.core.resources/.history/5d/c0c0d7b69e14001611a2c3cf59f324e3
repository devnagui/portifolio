/**
 * Criado por 006157C6 em 18/03/2013
 */
package br.com.devnagui.project.entities;

import java.io.Serializable;
import java.util.Date;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.JoinColumns;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToOne;
import javax.persistence.Table;
import javax.persistence.Transient;

/**
 * Criado por @author 006157C6 em 18/03/2013
 * 
 */
@Entity
@Table(name = "CONTRIBUINTE", schema = "CADASTRO")
@NamedQueries(value = {
        @NamedQuery(name = "buscaContribuintePorCNPJ", query = "SELECT c FROM Contribuinte c WHERE c.cnpj = :cnpj"),
        @NamedQuery(name = Contribuinte.QUERY_OBTER_CONTRIBUINTE_RAZAO_OU_CNPJ, query = "select c from Contribuinte c where (c.cnpjAsString like :cnpj or c.razaoSocial like :razaoSocial) "),
        @NamedQuery(name = Contribuinte.QUERY_OBTER_CONTRIBUINTE_DTO_RAZAO_OU_CNPJ, query = "select new br.com.devnagui.project.dto.ContribuinteDTO(c.id, c.codSituacaoContribuinte) from Contribuinte c where (c.cnpjAsString like :cnpj or c.razaoSocial like :razaoSocial) "),
        @NamedQuery(name = Contribuinte.QUERY_OBTER_TOTAL_CONTRIBUINTES_POR_RAZAO_OU_CNPJ, query = "select count( DISTINCT c.cnpj) from Contribuinte c where (c.cnpjAsString like :cnpj or c.razaoSocial like :razaoSocial) group by c.cnpj,c.razaoSocial "),
        @NamedQuery(name = Contribuinte.QUERY_OBTER_TOTAL_CONTRIBUINTES_ATIVOS_POR_RAZAO_OU_CNPJ, query = "select count( DISTINCT c.cnpj) from Contribuinte c where (c.cnpjAsString like :cnpj or c.razaoSocial like :razaoSocial) and c.codSituacaoContribuinte in (1,8) group by c.cnpj,c.razaoSocial ") })
public class Contribuinte implements Serializable {

    // ATRIBUTOS E CONSTRUTORES

    /**
	 * 
	 */
    private static final long serialVersionUID = 805327153758174598L;

    public static final String QUERY_OBTER_CONTRIBUINTE_RAZAO_OU_CNPJ = "obterContribuintePorRazaoOuRazao";
    public static final String QUERY_OBTER_CONTRIBUINTE_DTO_RAZAO_OU_CNPJ = "obterContribuinteDTOPorRazaoOuRazao";
    public static final String QUERY_OBTER_TOTAL_CONTRIBUINTES_POR_RAZAO_OU_CNPJ = "obterTotalContribuintesPorRazaoOuRazao";
    public static final String QUERY_OBTER_TOTAL_CONTRIBUINTES_ATIVOS_POR_RAZAO_OU_CNPJ = "obterTotalContribuintesPorRazaoOuCnpjAtivos";

    @Id()
    @Column(name = "SEQ_CONTRIBUINTE", insertable = false, updatable = false)
    private Long id;

    @Column(name = "COD_CNPJ")
    private Long cnpj;

    @Column(name = "COD_CNPJ", insertable = false, updatable = false)
    private String cnpjAsString;

    @Column(name = "NOM_RAZAO_SOCIAL")
    private String razaoSocial;

    @Column(name = "COD_CAE_NACIONAL", precision = 7, scale = 0)
    private Long codCNAE;

    @Column(name = "COD_SITUACAO_CONTRIBUINTE")
    private Long codSituacaoContribuinte;

    @Column(name = "COD_CGF")
    private Long codCgf;
    
    @OneToOne(mappedBy="contribuinte")
    private PostoCombustivel postoCombustivel;

    // COD_UF
    @OneToOne
    @JoinColumns(value={@JoinColumn(name="COD_UF",referencedColumnName="COD_UF"),@JoinColumn(name="COD_MUNICIPIO",referencedColumnName="COD_MUNICIPIO")})
    private Municipio municipio;

    // NOM_LOGRADOURO
    @Column(name = "NOM_LOGRADOURO")
    private String nomeLogradouro;
    // NUM_CEP
    @Column(name = "NUM_CEP")
    private Long numCep;
    // NUM_LOGRADOURO
    @Column(name = "NUM_LOGRADOURO")
    private String numLogradouro;
    // NOM_COMPLEMENTO
    @Column(name = "NOM_COMPLEMENTO")
    private String nomeComplemento;
    // NOM_BAIRRO
    @Column(name = "NOM_BAIRRO")
    private String nomeBairro;

    @Transient
    private String vinculacaoDistribuidor;

    @Transient
    private Date dataVinculacaoDistribuidor;

    @Transient
    private String bandeiraAnterior;

    @Transient
    private boolean novoPosto;

    @Transient
    private boolean razaoSocialDiferente;

    @Transient
    private boolean bandeiraDiferente;

    @Transient
    private boolean contribuinteNaoExistente;

    @Transient
    private boolean bandeiraNaoExistenteSefaz;

    @Transient
    private boolean postoInativo;

    @Transient
    private boolean postoAtivoSefazNaoEncontadoAnp;

    @Transient
    private String razaoSocialAnp;

    public String getEnderecoComum() {
        return formataVazioOuParam(nomeLogradouro) + " - " + formataVazioOuParam(numLogradouro) + " - " + formataVazioOuParam(numCep) + " - " + municipio != null ? municipio
                .getDscMunicipio() : "" + " - ";
    }

    protected String formataVazioOuParam(final Object param) {
        return param != null ? param.toString() : "Informação não cadastrada";
    }

    /**
     * @return the id
     */
    public Long getId() {
        return id;
    }

    /**
     * @param id
     *            the id to set
     */
    public void setId(Long id) {
        this.id = id;
    }

    /**
     * @return the cnpj
     */
    public Long getCnpj() {
        return cnpj;
    }

    /**
     * @param cnpj
     *            the cnpj to set
     */
    public void setCnpj(Long cnpj) {
        this.cnpj = cnpj;
    }

    /**
     * @return the cnpjAsString
     */
    public String getCnpjAsString() {
        return String.valueOf(cnpj);
    }

    public void setCnpjAsString(String cnpj) {
        this.cnpjAsString = cnpj;
    }

    /**
     * @return the razaoSocial
     */
    public String getRazaoSocial() {
        return razaoSocial;
    }

    /**
     * @param razaoSocial
     *            the razaoSocial to set
     */
    public void setRazaoSocial(String razaoSocial) {
        this.razaoSocial = razaoSocial;
    }

    public String getVinculacaoDistribuidor() {
        return vinculacaoDistribuidor;
    }

    public void setVinculacaoDistribuidor(String vinculacaoDistribuidor) {
        this.vinculacaoDistribuidor = vinculacaoDistribuidor;
    }

    public Date getDataVinculacaoDistribuidor() {
        return dataVinculacaoDistribuidor;
    }

    public void setDataVinculacaoDistribuidor(Date dataVinculacaoDistribuidor) {
        this.dataVinculacaoDistribuidor = dataVinculacaoDistribuidor;
    }

    public boolean isNovoPosto() {
        return novoPosto;
    }

    public void setNovoPosto(boolean novoPosto) {
        this.novoPosto = novoPosto;
    }

    public boolean isRazaoSocialDiferente() {
        return razaoSocialDiferente;
    }

    public void setRazaoSocialDiferente(boolean razaoSocialDiferente) {
        this.razaoSocialDiferente = razaoSocialDiferente;
    }

    public boolean isBandeiraDiferente() {
        return bandeiraDiferente;
    }

    public void setBandeiraDiferente(boolean bandeiraDiferente) {
        this.bandeiraDiferente = bandeiraDiferente;
    }

    public void setContribuinteNaoExistente(boolean contribuinteNaoExistente) {
        this.contribuinteNaoExistente = contribuinteNaoExistente;
    }

    public boolean isContribuinteNaoExistente() {
        return contribuinteNaoExistente;
    }

    public boolean isBandeiraNaoExistenteSefaz() {
        return bandeiraNaoExistenteSefaz;
    }

    public void setBandeiraNaoExistenteSefaz(boolean bandeiraNaoExistenteSefaz) {
        this.bandeiraNaoExistenteSefaz = bandeiraNaoExistenteSefaz;
    }

    public String getBandeiraAnterior() {
        return bandeiraAnterior;
    }

    public void setBandeiraAnterior(String bandeiraAnterior) {
        this.bandeiraAnterior = bandeiraAnterior;
    }

    public boolean isPostoInativo() {
        return postoInativo;
    }

    public void setPostoInativo(boolean postoInativo) {
        this.postoInativo = postoInativo;
    }

    /**
     * @return the codCNAE
     */
    public Long getCodCNAE() {
        return codCNAE;
    }

    /**
     * @param codCNAE
     *            the codCNAE to set
     */
    public void setCodCNAE(Long codCNAE) {
        this.codCNAE = codCNAE;
    }

    /**
     * @return the codSituacaoContribuinte
     */
    public Long getCodSituacaoContribuinte() {
        return codSituacaoContribuinte;
    }

    /**
     * @param codSituacaoContribuinte
     *            the codSituacaoContribuinte to set
     */
    public void setCodSituacaoContribuinte(Long codSituacaoContribuinte) {
        this.codSituacaoContribuinte = codSituacaoContribuinte;
    }

    public Long getCodCgf() {
        return codCgf;
    }

    public void setCodCgf(Long codCgf) {
        this.codCgf = codCgf;
    }

    public String getRazaoSocialAnp() {
        return razaoSocialAnp;
    }

    public void setRazaoSocialAnp(String razaoSocialAnp) {
        this.razaoSocialAnp = razaoSocialAnp;
    }

    public boolean isPostoAtivoSefazNaoEncontadoAnp() {
        return postoAtivoSefazNaoEncontadoAnp;
    }

    public void setPostoAtivoSefazNaoEncontadoAnp(boolean postoAtivoSefazNaoEncontadoAnp) {
        this.postoAtivoSefazNaoEncontadoAnp = postoAtivoSefazNaoEncontadoAnp;
    }

    public String getNomeLogradouro() {
        return nomeLogradouro;
    }

    public void setNomeLogradouro(String nomeLogradouro) {
        this.nomeLogradouro = nomeLogradouro;
    }

    public Long getNumCep() {
        return numCep;
    }

    public void setNumCep(Long numCep) {
        this.numCep = numCep;
    }

    public String getNomeComplemento() {
        return nomeComplemento;
    }

    public void setNomeComplemento(String nomeComplemento) {
        this.nomeComplemento = nomeComplemento;
    }

    public String getNomeBairro() {
        return nomeBairro;
    }

    public void setNomeBairro(String nomeBairro) {
        this.nomeBairro = nomeBairro;
    }

    public String getNumLogradouro() {
        return numLogradouro;
    }

    public void setNumLogradouro(String numLogradouro) {
        this.numLogradouro = numLogradouro;
    }

    public Municipio getMunicipio() {
        return municipio;
    }

    public void setMunicipio(Municipio municipio) {
        this.municipio = municipio;
    }

    
     public PostoCombustivel getPostoCombustivel() {
     return postoCombustivel;
     }
    
    
     public void setPostoCombustivel(PostoCombustivel postoCombustivel) {
     this.postoCombustivel = postoCombustivel;
     }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Object#hashCode()
     */
    @Override
    public int hashCode() {
        final int prime = 31;
        int result = 1;
        result = prime * result + ((cnpj == null) ? 0 : cnpj.hashCode());
        result = prime * result + ((id == null) ? 0 : id.hashCode());
        result = prime * result + ((razaoSocial == null) ? 0 : razaoSocial.hashCode());
        return result;
    }

    /*
     * (non-Javadoc)
     * 
     * @see java.lang.Object#equals(java.lang.Object)
     */
    @Override
    public boolean equals(Object obj) {
        if (this == obj)
            return true;
        if (obj == null)
            return false;
        if (!(obj instanceof Contribuinte))
            return false;
        Contribuinte other = (Contribuinte) obj;
        if (cnpj == null) {
            if (other.cnpj != null)
                return false;
        } else if (!cnpj.equals(other.cnpj))
            return false;
        if (id == null) {
            if (other.id != null)
                return false;
        } else if (!id.equals(other.id))
            return false;
        if (razaoSocial == null) {
            if (other.razaoSocial != null)
                return false;
        } else if (!razaoSocial.equals(other.razaoSocial))
            return false;
        return true;
    }

}
