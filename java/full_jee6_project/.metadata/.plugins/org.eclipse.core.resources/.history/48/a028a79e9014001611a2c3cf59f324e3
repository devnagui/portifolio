package br.gov.ce.sefaz.project.entities;

import java.io.Serializable;
import java.util.List;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EnumType;
import javax.persistence.Enumerated;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.NamedQueries;
import javax.persistence.NamedQuery;
import javax.persistence.OneToMany;
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;
import javax.validation.constraints.NotNull;
import javax.validation.constraints.Size;

import br.gov.ce.sefaz.project.enums.TipoMedicaoBomba;

@Entity
@Table(name = "BOMBA",schema="PROJECT")
@NamedQueries(value = {
		@NamedQuery(name = Bomba.QUERY_VERIFICA_NUM_BOMBA_UNIQUE, query = "select count(b) from Bomba b where b.numBombaPosto = :numBombaPosto and b.id <> :idBomba and b.postoCombustivel.id = :idPosto"),
		@NamedQuery(name = Bomba.QUERY_OBTER_BOMBAS_DO_POSTO, query = "select b from Bomba b where b.postoCombustivel.id = :idPosto order by b.numBombaPosto asc") })
public class Bomba implements Serializable, Comparable<Bomba> {

	// ATRIBUTOS E CONSTRUTORES

	/**
	 * 
	 */
	private static final long serialVersionUID = 7184752825036260959L;

	public static final String QUERY_VERIFICA_NUM_BOMBA_UNIQUE = "queryVerificaNumBombaUnique";
	public static final String QUERY_OBTER_BOMBAS_DO_POSTO = "queryBuscaBombasDoPosto";

	@Id
	@Column(name = "SEQ_BOMBA")
	@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "SQ_BOMBA")
	@SequenceGenerator(name = "SQ_BOMBA", sequenceName = "SQ_BOMBA", allocationSize = 1, initialValue = 1)
	private Long id;

	@ManyToOne(optional = false, cascade = { CascadeType.MERGE, CascadeType.REFRESH })
	@JoinColumn(name = "SEQ_POSTO_COMBUSTIVEL", nullable = false)
	private PostoCombustivel postoCombustivel;

	@NotNull(message = "msg.aba.tanque.tanqueEscolhido.numero.obrigatorio")
	@Column(name = "NUM_BOMBA_POSTO", precision = 3, scale = 0, updatable = true, insertable = true)
	private Long numBombaPosto;

	@Column(name = "NUM_SERIE_BOMBA", length = 20)
	private String numSerieBomba;

	@Column(name = "NOM_FABRICANTE_BOMBA", length = 20)
	private String nomeFabricanteBomba;

	@Column(name = "NOM_MODELO_BOMBA", length = 20)
	private String nomeModeloBomba;

	@Column(name = "TIP_MEDICAO_BOMBA", precision = 1, scale = 0, updatable = true, insertable = true)
	@Enumerated(value = EnumType.ORDINAL)
	private TipoMedicaoBomba tipoMedicaoBomba;

	@Column(name = "TXT_OBSERVACAO_BOMBA", length = 200)
	@Size(max=200,message="msg.aba.geral.observacao.maximo")
	private String observacaoBomba;

	@OneToMany(mappedBy = "bomba", cascade = { CascadeType.ALL }, fetch = FetchType.LAZY)
	private List<LacreBomba> lacres;

	// METODOS PUBLICOS
	/*
	 * (non-Javadoc)
	 * 
	 * @see java.lang.Comparable#compareTo(java.lang.Object)
	 */
	@Override
	public int compareTo(Bomba o) {
		return this.numBombaPosto.compareTo(o.numBombaPosto);
	}

	// METODOS PRIVADOS

	// GETS E SETS

	/*
	 * (non-Javadoc)
	 * 
	 * @see java.lang.Object#hashCode()
	 */
	@Override
	public int hashCode() {
		final int prime = 31;
		int result = 1;
		result = prime * result + ((id == null) ? 0 : id.hashCode());
		return result;
	}

	/*
	 * (non-Javadoc)
	 * 
	 * @see java.lang.Object#equals(java.lang.Object)
	 */
	@Override
	public boolean equals(Object obj) {
		if (this == obj)
			return true;
		if (obj == null)
			return false;
		if (!(obj instanceof Bomba))
			return false;
		Bomba other = (Bomba) obj;
		if (id == null) {
			if (other.id != null)
				return false;
		} else if (!id.equals(other.id))
			return false;
		return true;
	}

	/**
	 * @return the id
	 */
	public Long getId() {
		return id;
	}

	/**
	 * @param id
	 *            the id to set
	 */
	public void setId(Long id) {
		this.id = id;
	}

	/**
	 * @return the postoCombustivel
	 */
	public PostoCombustivel getPostoCombustivel() {
		return postoCombustivel;
	}

	/**
	 * @param postoCombustivel
	 *            the postoCombustivel to set
	 */
	public void setPostoCombustivel(PostoCombustivel postoCombustivel) {
		this.postoCombustivel = postoCombustivel;
	}

	/**
	 * @return the numBombaPosto
	 */
	public Long getNumBombaPosto() {
		return numBombaPosto;
	}

	/**
	 * @param numBombaPosto
	 *            the numBombaPosto to set
	 */
	public void setNumBombaPosto(Long numBombaPosto) {
		this.numBombaPosto = numBombaPosto;
	}

	/**
	 * @return the numSerieBomba
	 */
	public String getNumSerieBomba() {
		return numSerieBomba;
	}

	/**
	 * @param numSerieBomba
	 *            the numSerieBomba to set
	 */
	public void setNumSerieBomba(String numSerieBomba) {
		this.numSerieBomba = numSerieBomba;
	}

	/**
	 * @return the nomeFabricanteBomba
	 */
	public String getNomeFabricanteBomba() {
		return nomeFabricanteBomba;
	}

	/**
	 * @param nomeFabricanteBomba
	 *            the nomeFabricanteBomba to set
	 */
	public void setNomeFabricanteBomba(String nomeFabricanteBomba) {
		this.nomeFabricanteBomba = nomeFabricanteBomba;
	}

	/**
	 * @return the nomeModeloBomba
	 */
	public String getNomeModeloBomba() {
		return nomeModeloBomba;
	}

	/**
	 * @param nomeModeloBomba
	 *            the nomeModeloBomba to set
	 */
	public void setNomeModeloBomba(String nomeModeloBomba) {
		this.nomeModeloBomba = nomeModeloBomba;
	}

	/**
	 * @return the tipoMedicaoBomba
	 */
	public TipoMedicaoBomba getTipoMedicaoBomba() {
		return tipoMedicaoBomba;
	}

	/**
	 * @param tipoMedicaoBomba
	 *            the tipoMedicaoBomba to set
	 */
	public void setTipoMedicaoBomba(TipoMedicaoBomba tipoMedicaoBomba) {
		this.tipoMedicaoBomba = tipoMedicaoBomba;
	}

	/**
	 * @return the observacaoBomba
	 */
	public String getObservacaoBomba() {
		return observacaoBomba;
	}

	/**
	 * @param observacaoBomba
	 *            the observacaoBomba to set
	 */
	public void setObservacaoBomba(String observacaoBomba) {
		this.observacaoBomba = observacaoBomba;
	}

	/**
	 * @return the lacres
	 */
	public List<LacreBomba> getLacres() {
		return lacres;
	}

	/**
	 * @param lacres
	 *            the lacres to set
	 */
	public void setLacres(List<LacreBomba> lacres) {
		this.lacres = lacres;
	}

}
